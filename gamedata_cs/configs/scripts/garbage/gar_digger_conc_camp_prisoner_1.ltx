[logic]
active = walker@main
on_death = death
on_hit = hit

[hit]
on_info = {-gar_quest_talk_with_captive_leader_done} %=actor_neutral% ;{=hit_by_actor}

[death]
on_info = {-gar_conc_camp_one_prisoner_dead} %+gar_conc_camp_one_prisoner_dead%, %+gar_conc_camp_two_prisoners_dead%
on_info2 = {+gar_conc_camp_searcher_1_dead +gar_conc_camp_searcher_2_dead +gar_conc_camp_searcher_3_dead +gar_conc_camp_two_prisoners_dead} %+gar_conc_camp_all_diggers_dead%

[meet]
use = false
use_wpn = false
sound_start = nil
sound_start_wpn = nil
sound_stop = nil

[walker@main]
path_walk = gar_smart_terrain_3_7_unique_prisoner_1_walk
path_look = gar_smart_terrain_3_7_unique_prisoner_1_look
combat_ignore_cond = true
combat_ignore_keep_when_attacked = true
def_state_moving1 = walk
def_state_moving2 = walk
def_state_moving3 = walk
def_state_standing = prisoner
on_info = {+gar_quest_liberate_conc_camp_done} remark@wait %=actor_friend%, {=counter_exists(conc_camp_in_combat) =counter_greater(conc_camp_in_combat:0)} remark@danger
in_restr = gar_zone_mine_thermal_conc_camp_01, gar_zone_mine_thermal_conc_camp_02, gar_zone_mine_thermal_conc_camp_03, gar_zone_mine_thermal_conc_camp_04, gar_zone_mine_thermal_conc_camp_05, gar_zone_mine_thermal_conc_camp_06, gar_zone_mine_thermal_conc_camp_07, gar_zone_mine_thermal_conc_camp_08, gar_zone_mine_thermal_conc_camp_09, gar_zone_mine_thermal_conc_camp_10, gar_zone_mine_thermal_conc_camp_11, gar_zone_mine_thermal_conc_camp_12, gar_zone_mine_thermal_conc_camp_13, gar_zone_mine_thermal_conc_camp_14, gar_zone_mine_thermal_conc_camp_15, gar_zone_mine_thermal_conc_camp_16, gar_zone_mine_thermal_conc_camp_17, gar_zone_mine_thermal_conc_camp_18, gar_zone_mine_thermal_conc_camp_19, gar_zone_mine_thermal_conc_camp_20, gar_zone_mine_thermal_conc_camp_21, gar_zone_mine_thermal_conc_camp_22, gar_zone_mine_thermal_conc_camp_23, gar_zone_mine_thermal_conc_camp_24, gar_zone_mine_thermal_conc_camp_25, gar_zone_mine_thermal_conc_camp_26, gar_zone_mine_thermal_conc_camp_27, gar_zone_mine_thermal_conc_camp_28, gar_zone_mine_thermal_conc_camp_29, gar_zone_mine_thermal_conc_camp_30, gar_zone_mine_thermal_conc_camp_31

[remark@danger]
anim = prisoner
on_info = {+gar_quest_liberate_conc_camp_done} remark@wait %=actor_friend%, {!counter_greater(conc_camp_in_combat:0)} walker@main
combat_ignore_cond = true
combat_ignore_keep_when_attacked = true
meet = meet
in_restr = gar_zone_mine_thermal_conc_camp_01, gar_zone_mine_thermal_conc_camp_02, gar_zone_mine_thermal_conc_camp_03, gar_zone_mine_thermal_conc_camp_04, gar_zone_mine_thermal_conc_camp_05, gar_zone_mine_thermal_conc_camp_06, gar_zone_mine_thermal_conc_camp_07, gar_zone_mine_thermal_conc_camp_08, gar_zone_mine_thermal_conc_camp_09, gar_zone_mine_thermal_conc_camp_10, gar_zone_mine_thermal_conc_camp_11, gar_zone_mine_thermal_conc_camp_12, gar_zone_mine_thermal_conc_camp_13, gar_zone_mine_thermal_conc_camp_14, gar_zone_mine_thermal_conc_camp_15, gar_zone_mine_thermal_conc_camp_16, gar_zone_mine_thermal_conc_camp_17, gar_zone_mine_thermal_conc_camp_18, gar_zone_mine_thermal_conc_camp_19, gar_zone_mine_thermal_conc_camp_20, gar_zone_mine_thermal_conc_camp_21, gar_zone_mine_thermal_conc_camp_22, gar_zone_mine_thermal_conc_camp_23, gar_zone_mine_thermal_conc_camp_24, gar_zone_mine_thermal_conc_camp_25, gar_zone_mine_thermal_conc_camp_26, gar_zone_mine_thermal_conc_camp_27, gar_zone_mine_thermal_conc_camp_28, gar_zone_mine_thermal_conc_camp_29, gar_zone_mine_thermal_conc_camp_30, gar_zone_mine_thermal_conc_camp_31

[remark@wait]
anim = wait
target = actor
on_info = {-gar_quest_talk_with_captive_leader_started} remark@reward %+gar_quest_talk_with_captive_leader_started%, {+gar_quest_talk_with_captive_leader_done} walker@free
in_restr = gar_zone_mine_thermal_conc_camp_01, gar_zone_mine_thermal_conc_camp_02, gar_zone_mine_thermal_conc_camp_03, gar_zone_mine_thermal_conc_camp_04, gar_zone_mine_thermal_conc_camp_05, gar_zone_mine_thermal_conc_camp_06, gar_zone_mine_thermal_conc_camp_07, gar_zone_mine_thermal_conc_camp_08, gar_zone_mine_thermal_conc_camp_09, gar_zone_mine_thermal_conc_camp_10, gar_zone_mine_thermal_conc_camp_11, gar_zone_mine_thermal_conc_camp_12, gar_zone_mine_thermal_conc_camp_13, gar_zone_mine_thermal_conc_camp_14, gar_zone_mine_thermal_conc_camp_15, gar_zone_mine_thermal_conc_camp_16, gar_zone_mine_thermal_conc_camp_17, gar_zone_mine_thermal_conc_camp_18, gar_zone_mine_thermal_conc_camp_19, gar_zone_mine_thermal_conc_camp_20, gar_zone_mine_thermal_conc_camp_21, gar_zone_mine_thermal_conc_camp_22, gar_zone_mine_thermal_conc_camp_23, gar_zone_mine_thermal_conc_camp_24, gar_zone_mine_thermal_conc_camp_25, gar_zone_mine_thermal_conc_camp_26, gar_zone_mine_thermal_conc_camp_27, gar_zone_mine_thermal_conc_camp_28, gar_zone_mine_thermal_conc_camp_29, gar_zone_mine_thermal_conc_camp_30, gar_zone_mine_thermal_conc_camp_31

[remark@reward]
anim = wait
target = actor
on_info = %=play_sound(gar_digger_captive_leader_reward:stalker:st_name_gar_smart_terrain_3_7)%
on_signal = sound_end | walker@free %=give_treasure(gar_treasure_quest_digger_reward) =give_inited_task(storyline:gar_quest_captive_reward:stalker) +gar_quest_talk_with_captive_leader_done%
in_restr = gar_zone_mine_thermal_conc_camp_01, gar_zone_mine_thermal_conc_camp_02, gar_zone_mine_thermal_conc_camp_03, gar_zone_mine_thermal_conc_camp_04, gar_zone_mine_thermal_conc_camp_05, gar_zone_mine_thermal_conc_camp_06, gar_zone_mine_thermal_conc_camp_07, gar_zone_mine_thermal_conc_camp_08, gar_zone_mine_thermal_conc_camp_09, gar_zone_mine_thermal_conc_camp_10, gar_zone_mine_thermal_conc_camp_11, gar_zone_mine_thermal_conc_camp_12, gar_zone_mine_thermal_conc_camp_13, gar_zone_mine_thermal_conc_camp_14, gar_zone_mine_thermal_conc_camp_15, gar_zone_mine_thermal_conc_camp_16, gar_zone_mine_thermal_conc_camp_17, gar_zone_mine_thermal_conc_camp_18, gar_zone_mine_thermal_conc_camp_19, gar_zone_mine_thermal_conc_camp_20, gar_zone_mine_thermal_conc_camp_21, gar_zone_mine_thermal_conc_camp_22, gar_zone_mine_thermal_conc_camp_23, gar_zone_mine_thermal_conc_camp_24, gar_zone_mine_thermal_conc_camp_25, gar_zone_mine_thermal_conc_camp_26, gar_zone_mine_thermal_conc_camp_27, gar_zone_mine_thermal_conc_camp_28, gar_zone_mine_thermal_conc_camp_29, gar_zone_mine_thermal_conc_camp_30, gar_zone_mine_thermal_conc_camp_31

[walker@free]
path_walk = gar_smart_terrain_3_7_unique_prisoners_gone
path_look = gar_smart_terrain_3_7_unique_prisoners_gone
on_signal = path_end | nil %=destroy_object%
in_restr = gar_zone_mine_thermal_conc_camp_01, gar_zone_mine_thermal_conc_camp_02, gar_zone_mine_thermal_conc_camp_03, gar_zone_mine_thermal_conc_camp_04, gar_zone_mine_thermal_conc_camp_05, gar_zone_mine_thermal_conc_camp_06, gar_zone_mine_thermal_conc_camp_07, gar_zone_mine_thermal_conc_camp_08, gar_zone_mine_thermal_conc_camp_09, gar_zone_mine_thermal_conc_camp_10, gar_zone_mine_thermal_conc_camp_11, gar_zone_mine_thermal_conc_camp_12, gar_zone_mine_thermal_conc_camp_13, gar_zone_mine_thermal_conc_camp_14, gar_zone_mine_thermal_conc_camp_15, gar_zone_mine_thermal_conc_camp_16, gar_zone_mine_thermal_conc_camp_17, gar_zone_mine_thermal_conc_camp_18, gar_zone_mine_thermal_conc_camp_19, gar_zone_mine_thermal_conc_camp_20, gar_zone_mine_thermal_conc_camp_21, gar_zone_mine_thermal_conc_camp_22, gar_zone_mine_thermal_conc_camp_23, gar_zone_mine_thermal_conc_camp_24, gar_zone_mine_thermal_conc_camp_25, gar_zone_mine_thermal_conc_camp_26, gar_zone_mine_thermal_conc_camp_27, gar_zone_mine_thermal_conc_camp_28, gar_zone_mine_thermal_conc_camp_29, gar_zone_mine_thermal_conc_camp_30, gar_zone_mine_thermal_conc_camp_31